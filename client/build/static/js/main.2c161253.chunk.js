(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{28:function(e,t,n){e.exports=n(37)},33:function(e,t,n){},34:function(e,t,n){},37:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(21),o=n.n(c),s=(n(33),n(34),n(39)),i=n(25),u=n(26),p=n(6),l=n(2),d=n.n(l),f=n(4),g=n(7),y="card",m=n(40),v=n(22),h=n(23),b=function(){function e(){Object(v.a)(this,e)}return Object(h.a)(e,null,[{key:"get_all_data",value:function(){var e=Object(f.a)(d.a.mark((function e(){var t,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://sage-dragon-278619.uc.r.appspot.com/api/all_cards");case 3:return t=e.sent,n=t.json(),console.log(n),e.abrupt("return",n);case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}()},{key:"insert_single_data",value:function(){var e=Object(f.a)(d.a.mark((function e(t){var n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://sage-dragon-278619.uc.r.appspot.com/api/card",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({category:t.category,content:t.content,type:t.type})});case 3:return n=e.sent,r=n.json(),console.log(r),e.abrupt("return",r);case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()},{key:"update_category",value:function(){var e=Object(f.a)(d.a.mark((function e(t){var n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t._id),e.prev=1,e.next=4,fetch("https://sage-dragon-278619.uc.r.appspot.com/api/update/"+String(t._id),{method:"PATCH",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({category:t.category})});case 4:return n=e.sent,r=n.json(),console.log(r),e.abrupt("return",r);case 10:e.prev=10,e.t0=e.catch(1),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}()},{key:"delete_entry",value:function(){var e=Object(f.a)(d.a.mark((function e(t){var n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t._id),e.prev=1,e.next=4,fetch("https://sage-dragon-278619.uc.r.appspot.com/api/remove/"+String(t._id),{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json"}});case 4:return n=e.sent,r=n.json(),console.log(r),e.abrupt("return",r);case 10:e.prev=10,e.t0=e.catch(1),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}()}]),e}();var w=function(e){var t=function(){var t=Object(f.a)(d.a.mark((function t(){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return document.getElementById(e.item._id).style.display="none",t.next=4,b.delete_entry({_id:e.item._id});case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),n=Object(m.a)({item:Object(p.a)({type:y,category:e.category},e.item)}),r=Object(g.a)(n,2)[1];return a.a.createElement("div",{ref:r,className:"card",id:e.item._id},e.item.content,"rw"!==e.category?a.a.createElement("span",{className:"close",onClick:t},"x"):" ")},j=n(41),_=function(e){var t=e.onDrop,n=e.children,r=e.category,c=Object(j.a)({accept:y,drop:function(e,n){t(e,n,r)},collect:function(e){return{isOver:e.isOver()}}}),o=Object(g.a)(c,2),s=o[0].isOver,i=o[1];return a.a.createElement("div",{ref:i,className:"drop-wrapper"},a.a.cloneElement(n,{isOver:s}))},O=function(e){e.isOver;var t=e.children;return a.a.createElement("div",{className:"col"},t)},E=[{category:"rw"},{category:"c1"},{category:"c2"},{category:"c3"},{category:"c4"},{category:"c5"}],k=function(){var e=Object(r.useState)([]),t=Object(g.a)(e,2),n=t[0],c=t[1];Object(r.useEffect)((function(){function e(){return(e=Object(f.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==n.length){e.next=5;break}return e.next=3,b.get_all_data();case 3:t=e.sent,c(t);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}));var o=function(){var e=Object(f.a)(d.a.mark((function e(t,n,r){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("rw"!==t.category){e.next=7;break}return e.next=3,b.insert_single_data({category:r,content:t.content,type:t.type});case 3:a=e.sent,t._id=a._id,e.next=9;break;case 7:return e.next=9,b.update_category({_id:t._id,category:r});case 9:c((function(e){var n;return n=(t.category,e.filter((function(e){return e._id!==t._id})).concat(Object(p.a)(Object(p.a)({},t),{},{category:r}))),console.log(t),Object(u.a)(n)}));case 10:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}();return a.a.createElement("div",{className:"row"},E.map((function(e){return a.a.createElement("div",{key:e.category,className:"col-wrapper"},a.a.createElement("div",{className:"board"},a.a.createElement("h2",{className:"col-header"},"rw"===e.category?"Rewards":e.category.toUpperCase()),"rw"!==e.category?a.a.createElement(_,{onDrop:o,category:e.category},a.a.createElement(O,null,n.filter((function(t){return t.category===e.category})).map((function(t){return a.a.createElement(w,{key:String(t._id),item:t,category:e.category})})))):a.a.createElement(O,null,n.filter((function(t){return t.category===e.category})).map((function(t){return a.a.createElement(w,{key:String(t._id),item:t,category:e.category})})))))})))};var x=function(){return a.a.createElement("div",{className:"App"},a.a.createElement("main",{className:"class-wrapper"},a.a.createElement(s.a,{backend:i.a},a.a.createElement(k,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(a.a.createElement(x,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[28,1,2]]]);
//# sourceMappingURL=main.2c161253.chunk.js.map